{"draw":1,"recordsTotal":0,"recordsFiltered":0,"data":[],"queries":[{"query":"select count(*) as aggregate from (select `transactions`.`id`, `transactions`.`transaction_date`, `transactions`.`due_dates` as `dues_dates`, `transactions`.`type`, `transactions`.`is_direct_sale`,
`transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`address_line_1`, `contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`,
`transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`order_status_served`, `transactions`.`order_status_cooked`, `transactions`.`discount_amount`, `transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`,
`transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`, `transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`,
`transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`, `transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`,
`transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date, \"%Y\/%m\/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name,
''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE\n TP.transaction_id=transactions.id) as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists,
(SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE\n TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`, `tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`,
COUNT( DISTINCT tsl.id) as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`, SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export`
from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` = `tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by`
= `u`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id` = `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id`
left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id` = `tos`.`id` where `transactions`.`business_id` = ? and `transactions`.`type` = ? and `transactions`.`status`
= ? and `transactions`.`shipping_status` != ? and `transactions`.`shipping_status` is not null group by `transactions`.`id`) count_row_table","bindings":[1,"sell","final","delivered"],"time":5.89},{"query":"select `transactions`.`id`, `transactions`.`transaction_date`,
`transactions`.`due_dates` as `dues_dates`, `transactions`.`type`, `transactions`.`is_direct_sale`, `transactions`.`invoice_no`, `transactions`.`invoice_no` as `invoice_no_text`, `contacts`.`name`, `contacts`.`mobile`, `contacts`.`contact_id`, `contacts`.`address_line_1`,
`contacts`.`supplier_business_name`, `transactions`.`status`, `transactions`.`payment_status`, `transactions`.`final_total`, `transactions`.`tax_amount`, `transactions`.`order_status_served`, `transactions`.`order_status_cooked`, `transactions`.`discount_amount`,
`transactions`.`discount_type`, `transactions`.`total_before_tax`, `transactions`.`rp_redeemed`, `transactions`.`rp_redeemed_amount`, `transactions`.`rp_earned`, `transactions`.`types_of_service_id`, `transactions`.`shipping_status`, `transactions`.`pay_term_number`,
`transactions`.`pay_term_type`, `transactions`.`additional_notes`, `transactions`.`staff_note`, `transactions`.`shipping_details`, `transactions`.`document`, `transactions`.`shipping_custom_field_1`, `transactions`.`shipping_custom_field_2`, `transactions`.`shipping_custom_field_3`,
`transactions`.`shipping_custom_field_4`, `transactions`.`shipping_custom_field_5`, `transactions`.`custom_field_1`, `transactions`.`custom_field_2`, `transactions`.`custom_field_3`, `transactions`.`custom_field_4`, DATE_FORMAT(transactions.transaction_date,
\"%Y\/%m\/%d\") as sale_date, CONCAT(COALESCE(u.surname, ''),' ',COALESCE(u.first_name, ''),' ',COALESCE(u.last_name,'')) as added_by, (SELECT SUM(IF(TP.is_return = 1,-1*TP.amount,TP.amount)) FROM transaction_payments AS TP WHERE\n TP.transaction_id=transactions.id)
as total_paid, `bl`.`name` as `business_location`, COUNT(SR.id) as return_exists, (SELECT SUM(TP2.amount) FROM transaction_payments AS TP2 WHERE\n TP2.transaction_id=SR.id ) as return_paid, COALESCE(SR.final_total, 0) as amount_return, `SR`.`id` as `return_transaction_id`,
`tos`.`name` as `types_of_service_name`, `transactions`.`service_custom_field_1`, COUNT( DISTINCT tsl.id) as total_items, CONCAT(COALESCE(ss.surname, ''),' ',COALESCE(ss.first_name, ''),' ',COALESCE(ss.last_name,'')) as waiter, `tables`.`name` as `table_name`,
SUM(tsl.quantity - tsl.so_quantity_invoiced) as so_qty_remaining, `transactions`.`is_export` from `transactions` left join `contacts` on `transactions`.`contact_id` = `contacts`.`id` left join `transaction_sell_lines` as `tsl` on `transactions`.`id` =
`tsl`.`transaction_id` and `tsl`.`parent_sell_line_id` is null left join `users` as `u` on `transactions`.`created_by` = `u`.`id` left join `users` as `ss` on `transactions`.`res_waiter_id` = `ss`.`id` left join `res_tables` as `tables` on `transactions`.`res_table_id`
= `tables`.`id` inner join `business_locations` as `bl` on `transactions`.`location_id` = `bl`.`id` left join `transactions` as `SR` on `transactions`.`id` = `SR`.`return_parent_id` left join `types_of_services` as `tos` on `transactions`.`types_of_service_id`
= `tos`.`id` where `transactions`.`business_id` = ? and `transactions`.`type` = ? and `transactions`.`status` = ? and `transactions`.`shipping_status` != ? and `transactions`.`shipping_status` is not null group by `transactions`.`id` order by `transaction_date`
desc limit 1000 offset 0","bindings":[1,"sell","final","delivered"],"time":5.74}],"input":{"draw":"1","columns":[{"data":"action","name":"action","searchable":"false","orderable":"false","search":{"value":null,"regex":"false"}},{"data":"transaction_date","name":"transaction_date","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"invoice_no","name":"invoice_no","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"conatct_name","name":"conatct_name","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"mobile","name":"contacts.mobile","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"business_location","name":"bl.name","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"shipping_status","name":"shipping_status","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"payment_status","name":"payment_status","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"waiter","name":"ss.first_name","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}}],"order":[{"column":"1","dir":"desc"}],"start":"0","length":"1000","search":{"value":null,"regex":"false"},"only_pending_shipments":"true","_":"1715923927807"}}