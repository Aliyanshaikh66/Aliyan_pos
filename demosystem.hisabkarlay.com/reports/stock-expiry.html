{"draw":1,"recordsTotal":0,"recordsFiltered":0,"data":[],"queries":[{"query":"select count(*) as aggregate from (select `p`.`name` as `product`, `p`.`sku`, `p`.`type` as `product_type`, `v`.`name` as `variation`, `v`.`sub_sku`, `pv`.`name` as `product_variation`,
`l`.`name` as `location`, `mfg_date`, `exp_date`, `u`.`short_name` as `unit`, SUM(COALESCE(quantity, 0) - COALESCE(quantity_sold, 0) - COALESCE(quantity_adjusted, 0) - COALESCE(quantity_returned, 0)) as stock_left, `t`.`ref_no`, `t`.`id` as `transaction_id`,
`purchase_lines`.`id` as `purchase_line_id`, `purchase_lines`.`lot_number` from `purchase_lines` left join `transactions` as `t` on `purchase_lines`.`transaction_id` = `t`.`id` left join `products` as `p` on `purchase_lines`.`product_id` = `p`.`id` left
join `variations` as `v` on `purchase_lines`.`variation_id` = `v`.`id` left join `product_variations` as `pv` on `v`.`product_variation_id` = `pv`.`id` left join `business_locations` as `l` on `t`.`location_id` = `l`.`id` left join `units` as `u` on `p`.`unit_id`
= `u`.`id` where `t`.`business_id` = ? and `p`.`enable_stock` = ? and date(`exp_date`)
<=? group by `purchase_lines`.`variation_id`, `purchase_lines`.`exp_date`, `purchase_lines`.`lot_number` having `stock_left`> ?) count_row_table","bindings":[1,1,"2024-06-16",0],"time":3.23},{"query":"select `p`.`name` as `product`, `p`.`sku`, `p`.`type` as `product_type`, `v`.`name` as `variation`, `v`.`sub_sku`, `pv`.`name` as `product_variation`, `l`.`name` as `location`,
    `mfg_date`, `exp_date`, `u`.`short_name` as `unit`, SUM(COALESCE(quantity, 0) - COALESCE(quantity_sold, 0) - COALESCE(quantity_adjusted, 0) - COALESCE(quantity_returned, 0)) as stock_left, `t`.`ref_no`, `t`.`id` as `transaction_id`, `purchase_lines`.`id`
    as `purchase_line_id`, `purchase_lines`.`lot_number` from `purchase_lines` left join `transactions` as `t` on `purchase_lines`.`transaction_id` = `t`.`id` left join `products` as `p` on `purchase_lines`.`product_id` = `p`.`id` left join `variations`
    as `v` on `purchase_lines`.`variation_id` = `v`.`id` left join `product_variations` as `pv` on `v`.`product_variation_id` = `pv`.`id` left join `business_locations` as `l` on `t`.`location_id` = `l`.`id` left join `units` as `u` on `p`.`unit_id` =
    `u`.`id` where `t`.`business_id` = ? and `p`.`enable_stock` = ? and date(`exp_date`)
    <=? group by `purchase_lines`.`variation_id`, `purchase_lines`.`exp_date`, `purchase_lines`.`lot_number` having `stock_left`> ? order by `exp_date` asc limit 1000 offset 0","bindings":[1,1,"2024-06-16",0],"time":0.97}],"input":{"draw":"1","columns":[{"data":"product","name":"p.name","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"location","name":"l.name","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"stock_left","name":"stock_left","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}},{"data":"exp_date","name":"exp_date","searchable":"true","orderable":"true","search":{"value":null,"regex":"false"}}],"order":[{"column":"3","dir":"asc"}],"start":"0","length":"1000","search":{"value":null,"regex":"false"},"exp_date_filter":"2024-06-16","_":"1715923927805"}}